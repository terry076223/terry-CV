<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>åŠŸèƒ½æ¸¬è©¦</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
    .test-section { margin: 20px 0; padding: 15px; background: #2a2a2a; border-radius: 8px; }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 4px; }
    .result { margin-top: 10px; padding: 10px; background: #333; border-radius: 4px; }
    .success { color: #4CAF50; }
    .error { color: #f44336; }
    pre { background: #1a1a1a; padding: 10px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>ğŸ”§ CV å°ˆæ¡ˆåŠŸèƒ½æ¸¬è©¦</h1>

  <div class="test-section">
    <h2>æ¸¬è©¦ 1: localStorage è®€å¯«</h2>
    <button onclick="testLocalStorage()">æ¸¬è©¦ localStorage</button>
    <div id="test1-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æ¸¬è©¦ 2: å„²å­˜é—œæ–¼æˆ‘çš„è³‡æ–™</h2>
    <input type="text" id="test-intro" placeholder="é—œæ–¼æˆ‘ä¸€" style="width: 300px; padding: 8px;">
    <input type="text" id="test-about" placeholder="é—œæ–¼æˆ‘äºŒ" style="width: 300px; padding: 8px;">
    <button onclick="testSaveProfile()">å„²å­˜è³‡æ–™</button>
    <div id="test2-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æ¸¬è©¦ 3: è®€å–ä¸¦é¡¯ç¤ºè³‡æ–™</h2>
    <button onclick="testLoadProfile()">è®€å–è³‡æ–™</button>
    <div id="test3-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æ¸¬è©¦ 4: æª¢è¦–å®Œæ•´è³‡æ–™çµæ§‹</h2>
    <button onclick="testViewData()">æª¢è¦–è³‡æ–™</button>
    <div id="test4-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æ¸¬è©¦ 5: æ¸…é™¤æ‰€æœ‰è³‡æ–™</h2>
    <button onclick="testClearData()" style="background: #f44336;">æ¸…é™¤è³‡æ–™</button>
    <div id="test5-result" class="result"></div>
  </div>

  <script>
    const STORAGE_KEY = 'cvData';

    function testLocalStorage() {
      const result = document.getElementById('test1-result');
      try {
        // æ¸¬è©¦å¯«å…¥
        localStorage.setItem('test', 'hello');
        const value = localStorage.getItem('test');
        localStorage.removeItem('test');
        
        if (value === 'hello') {
          result.innerHTML = '<span class="success">âœ“ localStorage è®€å¯«æ­£å¸¸</span>';
        } else {
          result.innerHTML = '<span class="error">âœ— localStorage è®€å–å¤±æ•—</span>';
        }
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— éŒ¯èª¤: ${err.message}</span>`;
      }
    }

    function testSaveProfile() {
      const result = document.getElementById('test2-result');
      try {
        const heroDesc = document.getElementById('test-intro').value || 'æ¸¬è©¦é¦–é ç°¡ä»‹';
        const aboutDesc = document.getElementById('test-about').value || 'æ¸¬è©¦é—œæ–¼æˆ‘ç°¡ä»‹';
        
        // å–å¾—æˆ–å»ºç«‹è³‡æ–™
        let data = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
        if (!data.profile) {
          data.profile = {};
        }
        
        data.profile.heroDescription = heroDesc;
        data.profile.aboutDescription = aboutDesc;
        data.profile.name = 'æ¸¬è©¦ä½¿ç”¨è€…';
        data.profile.title = 'æ¸¬è©¦è·ç¨±';
        
        // å„²å­˜
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        
        result.innerHTML = `<span class="success">âœ“ è³‡æ–™å·²å„²å­˜</span>
          <pre>heroDescription: ${heroDesc}\naboutDescription: ${aboutDesc}</pre>`;
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— å„²å­˜å¤±æ•—: ${err.message}</span>`;
      }
    }

    function testLoadProfile() {
      const result = document.getElementById('test3-result');
      try {
        const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
        
        if (!data || !data.profile) {
          result.innerHTML = '<span class="error">âœ— æ²’æœ‰æ‰¾åˆ°è³‡æ–™</span>';
          return;
        }
        
        const heroDesc = data.profile.heroDescription || '(ç©º)';
        const aboutDesc = data.profile.aboutDescription || '(ç©º)';
        
        result.innerHTML = `<span class="success">âœ“ è³‡æ–™è®€å–æˆåŠŸ</span>
          <pre>é¦–é ç°¡ä»‹: ${heroDesc}\né—œæ–¼æˆ‘ç°¡ä»‹: ${aboutDesc}</pre>`;
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— è®€å–å¤±æ•—: ${err.message}</span>`;
      }
    }

    function testViewData() {
      const result = document.getElementById('test4-result');
      try {
        const data = localStorage.getItem(STORAGE_KEY);
        if (!data) {
          result.innerHTML = '<span class="error">âœ— localStorage ä¸­æ²’æœ‰è³‡æ–™</span>';
          return;
        }
        
        const parsed = JSON.parse(data);
        result.innerHTML = `<span class="success">âœ“ è³‡æ–™çµæ§‹:</span>
          <pre>${JSON.stringify(parsed, null, 2)}</pre>`;
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— éŒ¯èª¤: ${err.message}</span>`;
      }
    }

    function testClearData() {
      const result = document.getElementById('test5-result');
      if (confirm('ç¢ºå®šè¦æ¸…é™¤æ‰€æœ‰è³‡æ–™å—ï¼Ÿ')) {
        localStorage.removeItem(STORAGE_KEY);
        result.innerHTML = '<span class="success">âœ“ è³‡æ–™å·²æ¸…é™¤</span>';
      }
    }

    // é é¢è¼‰å…¥æ™‚è‡ªå‹•æª¢æ¸¬
    window.onload = function() {
      testLocalStorage();
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        console.log('âœ“ æª¢æ¸¬åˆ°ç¾æœ‰è³‡æ–™');
        testLoadProfile();
      } else {
        console.log('âš  æ²’æœ‰æª¢æ¸¬åˆ°è³‡æ–™');
      }
    };
  </script>
</body>
</html>
