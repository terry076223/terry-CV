<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>後台管理 | CV Prototype</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-pb3VM2CO9sPeFm3N1T2nrvMx0s0wY8dq7Tjrvf7fPyMWj5D0wQx5QdRffzA2hY0vNnOqVqN5lrE6YCsQGFhDWg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="./styles/admin.css" />
</head>
<body>
  <div class="bg-grid"></div>
  <header class="admin-nav">
    <div class="logo">CV<span>Lab</span> Admin</div>
    <div class="nav-actions">
      <button id="logout-btn" class="btn ghost"><i class="fa-solid fa-arrow-right-from-bracket"></i> 登出</button>
      <a class="btn primary" href="./index.html" target="_blank">前台</a>
    </div>
  </header>

  <main class="admin-shell">
    

    <section id="dashboard" class="dashboard hidden">
      <div class="stats">
        <div class="stat-card">
          <p class="label">履歷 / 經歷</p>
          <p class="value" id="stat-exp">0</p>
        </div>
        <div class="stat-card">
          <p class="label">課程 / 證照</p>
          <p class="value" id="stat-cert">0</p>
        </div>
        <div class="stat-card">
          <p class="label">作品</p>
          <p class="value" id="stat-proj">0</p>
        </div>
      </div>

      <div class="grid admin-panels">
        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Security</p>
              <h2>帳號安全 / 修改密碼</h2>
            </div>
          </div>
          <form id="password-form" class="form-grid">
            <label>目前密碼<input type="password" id="pwd-current" required /></label>
            <label>新密碼<input type="password" id="pwd-new" required /></label>
            <label>確認新密碼<input type="password" id="pwd-confirm" required /></label>
            <button class="btn primary" type="submit">更新密碼</button>
          </form>
          <p class="hint">Prototype 僅於本地儲存密碼；正式系統應由後端驗證與雜湊儲存。</p>
        </section>
        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">GitHub</p>
              <h2>圖片上傳設定</h2>
            </div>
          </div>
          <form id="github-token-form" class="form-grid">
            <label>GitHub Token
              <input type="password" id="github-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" />
              <small style="display: block; color: #9aa1b5; margin-top: 4px;">
                <a href="https://github.com/settings/tokens" target="_blank" style="color: var(--accent);">建立 Token</a> (需 repo 權限)
              </small>
            </label>
            <button class="btn primary" type="submit">儲存 Token</button>
          </form>
          <div id="token-status" style="margin-top: 12px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 8px; min-height: 40px;">
            <p style="color: #9aa1b5; font-size: 12px; margin: 0;">Token 狀態：未設定</p>
          </div>
          <p class="hint">Token 儲存在本地，用於上傳圖片到 GitHub repo。建議使用 fine-grained token，權限設定為 "Contents: Read and Write"。</p>
        </section>
        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Profile</p>
              <h2>關於我 / 聯絡方式</h2>
            </div>
          </div>
          <form id="profile-form" class="form-grid">
            <label>姓名<input id="profile-name" required /></label>
            <label>職稱<input id="profile-title" required /></label>
            <label>所在地<input id="profile-location" /></label>
            <label>Email<input id="profile-email" type="email" /></label>
            <label>電話<input id="profile-phone" /></label>
            <label style="grid-column: 1 / -1;">關於我<textarea id="profile-intro" rows="4" required></textarea></label>
            <label style="grid-column: 1 / -1;">大頭貼上傳（Prototype，存為 base64）<input id="profile-avatar" type="file" accept="image/*" /></label>
            <button class="btn primary" type="submit">儲存</button>
            <button class="btn ghost" type="button" id="profile-reset">清除變更</button>
          </form>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Experience</p>
              <h2>工作經歷管理</h2>
            </div>
          </div>
          <form id="exp-work-form" class="form-grid">
            <input type="hidden" id="exp-work-id" />
            <input type="hidden" id="exp-work-type" value="Work" />
            <label>機構/公司<input id="exp-work-company" required /></label>
            <label>職稱/角色<input id="exp-work-role" required /></label>
            <label>期間<input id="exp-work-period" placeholder="2022 - Now" required /></label>
            <label>摘要<textarea id="exp-work-summary" rows="3" required></textarea></label>
            <button class="btn primary" type="submit">儲存</button>
            <button class="btn ghost" type="button" id="exp-work-reset">清除表單</button>
          </form>
          <div class="list" id="work-list"></div>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Experience</p>
              <h2>學歷管理</h2>
            </div>
          </div>
          <form id="exp-edu-form" class="form-grid">
            <input type="hidden" id="exp-edu-id" />
            <input type="hidden" id="exp-edu-type" value="Education" />
            <label>學校/機構<input id="exp-edu-company" required /></label>
            <label>學位/身分<input id="exp-edu-role" required /></label>
            <label>期間<input id="exp-edu-period" placeholder="最高學歷 / 年份" required /></label>
            <label>摘要<textarea id="exp-edu-summary" rows="3" required></textarea></label>
            <button class="btn primary" type="submit">儲存</button>
            <button class="btn ghost" type="button" id="exp-edu-reset">清除表單</button>
          </form>
          <div class="list" id="edu-list"></div>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Skills</p>
              <h2>技能樹管理</h2>
            </div>
          </div>
          <form id="skill-form" class="form-grid">
            <input type="hidden" id="skill-id" />
            <label>技能類別<input id="skill-name" placeholder="資料分析 / 前端協作 等" required /></label>
            <label style="grid-column: 1 / -1;">技能條目 + 等級（用「名稱|等級」格式，逗號分隔）
              <textarea id="skill-items" rows="3" placeholder="Python|熟練, SAS|剛接觸, R|入門" required></textarea>
            </label>
            <p class="hint" style="grid-column: 1 / -1;">等級建議：熟練 / 進階 / 入門 / 剛接觸（自由文字亦可）</p>
            <button class="btn primary" type="submit">儲存</button>
            <button class="btn ghost" type="button" id="skill-reset">清除表單</button>
          </form>
          <div class="list" id="skill-list"></div>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Courses</p>
              <h2>課程</h2>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 320px; gap: 24px; align-items: start;">
            <form id="course-form" class="form-grid">
              <input type="hidden" id="course-id" />
              <label>名稱<input id="course-name" required /></label>
              <label>主辦單位<input id="course-issuer" required /></label>
              <label>年份<input id="course-year" placeholder="2024" required /></label>
              <label>連結（可留空）<input id="course-link" /></label>
              <label>說明<textarea id="course-desc" rows="3"></textarea></label>
              <label>課程照片路徑
                <input id="course-photo-path" placeholder="例：assets/images/course1.jpg" readonly />
                <small style="display: block; color: #9aa1b5; margin-top: 4px;">圖片路徑（例：assets/images/filename.jpg）</small>
              </label>
              <div style="display: flex; gap: 8px;">
                <input type="file" id="course-photo-file" accept="image/*" style="display: none;" />
                <button class="btn ghost" type="button" id="course-upload-btn" onclick="document.getElementById('course-photo-file').click()">
                  <i class="fa-solid fa-upload"></i> 上傳圖片
                </button>
              </div>
              <button class="btn primary" type="submit">儲存</button>
              <button class="btn ghost" type="button" id="course-reset">清除表單</button>
            </form>
            <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
              <p style="font-size: 12px; color: #9aa1b5; margin: 0;">照片預覽</p>
              <div id="course-photo-preview" style="width: 280px; height: 280px; border-radius: 8px; overflow: hidden; background: rgba(255,255,255,0.05); border: 2px solid #1f2637; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <p style="color: #9aa1b5; font-size: 12px; margin: 0; text-align: center; padding: 12px;">上傳照片後預覽</p>
              </div>
            </div>
          </div>
          <div class="list" id="course-list"></div>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Certificates</p>
              <h2>證照</h2>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 320px; gap: 24px; align-items: start;">
            <form id="cert-form" class="form-grid">
              <input type="hidden" id="cert-id" />
              <label>名稱<input id="cert-name" required /></label>
              <label>主辦單位<input id="cert-issuer" required /></label>
              <label>年份<input id="cert-year" placeholder="2024" required /></label>
              <label>連結（可留空）<input id="cert-link" /></label>
              <label>說明<textarea id="cert-desc" rows="3"></textarea></label>
              <label>證照照片路徑
                <input id="cert-photo-path" placeholder="例：assets/images/cert1.jpg" readonly />
                <small style="display: block; color: #9aa1b5; margin-top: 4px;">圖片路徑（例：assets/images/filename.jpg）</small>
              </label>
              <div style="display: flex; gap: 8px;">
                <input type="file" id="cert-photo-file" accept="image/*" style="display: none;" />
                <button class="btn ghost" type="button" id="cert-upload-btn" onclick="document.getElementById('cert-photo-file').click()">
                  <i class="fa-solid fa-upload"></i> 上傳圖片
                </button>
              </div>
              <button class="btn primary" type="submit">儲存</button>
              <button class="btn ghost" type="button" id="cert-reset">清除表單</button>
            </form>
            <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
              <p style="font-size: 12px; color: #9aa1b5; margin: 0;">照片預覽</p>
              <div id="cert-photo-preview" style="width: 280px; height: 280px; border-radius: 8px; overflow: hidden; background: rgba(255,255,255,0.05); border: 2px solid #1f2637; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <p style="color: #9aa1b5; font-size: 12px; margin: 0; text-align: center; padding: 12px;">上傳照片後預覽</p>
              </div>
            </div>
          </div>
          <div class="list" id="cert-list"></div>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Awards</p>
              <h2>獎狀 / 競賽</h2>
            </div>
          </div>
          <div style="display: grid; grid-template-columns: 1fr 320px; gap: 24px; align-items: start;">
            <form id="award-form" class="form-grid">
              <input type="hidden" id="award-id" />
              <label>名稱<input id="award-name" required /></label>
              <label>主辦單位<input id="award-issuer" required /></label>
              <label>年份<input id="award-year" placeholder="2024" required /></label>
              <label>連結（可留空）<input id="award-link" /></label>
              <label>說明<textarea id="award-desc" rows="3"></textarea></label>
              <label>獎狀照片路徑
                <input id="award-photo-path" placeholder="例：assets/images/award1.jpg" readonly />
                <small style="display: block; color: #9aa1b5; margin-top: 4px;">圖片路徑（例：assets/images/filename.jpg）</small>
              </label>
              <div style="display: flex; gap: 8px;">
                <input type="file" id="award-photo-file" accept="image/*" style="display: none;" />
                <button class="btn ghost" type="button" id="award-upload-btn" onclick="document.getElementById('award-photo-file').click()">
                  <i class="fa-solid fa-upload"></i> 上傳圖片
                </button>
              </div>
              <button class="btn primary" type="submit">儲存</button>
              <button class="btn ghost" type="button" id="award-reset">清除表單</button>
            </form>
            <div style="display: flex; flex-direction: column; gap: 12px; align-items: center;">
              <p style="font-size: 12px; color: #9aa1b5; margin: 0;">照片預覽</p>
              <div id="award-photo-preview" style="width: 280px; height: 280px; border-radius: 8px; overflow: hidden; background: rgba(255,255,255,0.05); border: 2px solid #1f2637; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <p style="color: #9aa1b5; font-size: 12px; margin: 0; text-align: center; padding: 12px;">上傳照片後預覽</p>
              </div>
            </div>
          </div>
          <div class="list" id="award-list" style="margin-top: 24px;"></div>
        </section>

        <section class="card">
          <div class="panel-head">
            <div>
              <p class="eyebrow">Projects</p>
              <h2>作品管理</h2>
            </div>
          </div>
          <form id="proj-form" class="form-grid">
            <input type="hidden" id="proj-id" />
            <label>作品名稱<input id="proj-name" required /></label>
            <label>技術標籤<input id="proj-tech" placeholder="HTML / CSS / JS" required /></label>
            <label>專案連結<input id="proj-link" placeholder="https://" /></label>
            <label>說明<textarea id="proj-desc" rows="3" required></textarea></label>
            <button class="btn primary" type="submit">儲存</button>
            <button class="btn ghost" type="button" id="proj-reset">清除表單</button>
          </form>
          <div class="list" id="proj-list"></div>
        </section>
      </div>
    </section>
  </main>

  <script src="./scripts/github-uploader.js"></script>
  <script type="module" src="./scripts/admin.js"></script>
</body>
</html>
