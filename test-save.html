<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>åŠŸèƒ½æµ‹è¯•</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
    .test-section { margin: 20px 0; padding: 15px; background: #2a2a2a; border-radius: 8px; }
    button { padding: 10px 20px; margin: 5px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 4px; }
    .result { margin-top: 10px; padding: 10px; background: #333; border-radius: 4px; }
    .success { color: #4CAF50; }
    .error { color: #f44336; }
    pre { background: #1a1a1a; padding: 10px; border-radius: 4px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>ğŸ”§ CV é¡¹ç›®åŠŸèƒ½æµ‹è¯•</h1>

  <div class="test-section">
    <h2>æµ‹è¯• 1: localStorage è¯»å†™</h2>
    <button onclick="testLocalStorage()">æµ‹è¯• localStorage</button>
    <div id="test1-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æµ‹è¯• 2: ä¿å­˜å…³äºæˆ‘çš„æ•°æ®</h2>
    <input type="text" id="test-intro" placeholder="å…³äºæˆ‘ä¸€" style="width: 300px; padding: 8px;">
    <input type="text" id="test-about" placeholder="å…³äºæˆ‘äºŒ" style="width: 300px; padding: 8px;">
    <button onclick="testSaveProfile()">ä¿å­˜æ•°æ®</button>
    <div id="test2-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æµ‹è¯• 3: è¯»å–å¹¶æ˜¾ç¤ºæ•°æ®</h2>
    <button onclick="testLoadProfile()">è¯»å–æ•°æ®</button>
    <div id="test3-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æµ‹è¯• 4: æŸ¥çœ‹å®Œæ•´æ•°æ®ç»“æ„</h2>
    <button onclick="testViewData()">æŸ¥çœ‹æ•°æ®</button>
    <div id="test4-result" class="result"></div>
  </div>

  <div class="test-section">
    <h2>æµ‹è¯• 5: æ¸…é™¤æ‰€æœ‰æ•°æ®</h2>
    <button onclick="testClearData()" style="background: #f44336;">æ¸…é™¤æ•°æ®</button>
    <div id="test5-result" class="result"></div>
  </div>

  <script>
    const STORAGE_KEY = 'cvData';

    function testLocalStorage() {
      const result = document.getElementById('test1-result');
      try {
        // æµ‹è¯•å†™å…¥
        localStorage.setItem('test', 'hello');
        const value = localStorage.getItem('test');
        localStorage.removeItem('test');
        
        if (value === 'hello') {
          result.innerHTML = '<span class="success">âœ“ localStorage è¯»å†™æ­£å¸¸</span>';
        } else {
          result.innerHTML = '<span class="error">âœ— localStorage è¯»å–å¤±è´¥</span>';
        }
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— é”™è¯¯: ${err.message}</span>`;
      }
    }

    function testSaveProfile() {
      const result = document.getElementById('test2-result');
      try {
        const heroDesc = document.getElementById('test-intro').value || 'æµ‹è¯•é¦–é¡µç®€ä»‹';
        const aboutDesc = document.getElementById('test-about').value || 'æµ‹è¯•å…³äºæˆ‘ç®€ä»‹';
        
        // è·å–æˆ–åˆ›å»ºæ•°æ®
        let data = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
        if (!data.profile) {
          data.profile = {};
        }
        
        data.profile.heroDescription = heroDesc;
        data.profile.aboutDescription = aboutDesc;
        data.profile.name = 'æµ‹è¯•ç”¨æˆ·';
        data.profile.title = 'æµ‹è¯•èŒç§°';
        
        // ä¿å­˜
        localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
        
        result.innerHTML = `<span class="success">âœ“ æ•°æ®å·²ä¿å­˜</span>
          <pre>heroDescription: ${heroDesc}\naboutDescription: ${aboutDesc}</pre>`;
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— ä¿å­˜å¤±è´¥: ${err.message}</span>`;
      }
    }

    function testLoadProfile() {
      const result = document.getElementById('test3-result');
      try {
        const data = JSON.parse(localStorage.getItem(STORAGE_KEY));
        
        if (!data || !data.profile) {
          result.innerHTML = '<span class="error">âœ— æ²¡æœ‰æ‰¾åˆ°æ•°æ®</span>';
          return;
        }
        
        const heroDesc = data.profile.heroDescription || '(ç©º)';
        const aboutDesc = data.profile.aboutDescription || '(ç©º)';
        
        result.innerHTML = `<span class="success">âœ“ æ•°æ®è¯»å–æˆåŠŸ</span>
          <pre>é¦–é¡µç®€ä»‹: ${heroDesc}\nå…³äºæˆ‘ç®€ä»‹: ${aboutDesc}</pre>`;
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— è¯»å–å¤±è´¥: ${err.message}</span>`;
      }
    }

    function testViewData() {
      const result = document.getElementById('test4-result');
      try {
        const data = localStorage.getItem(STORAGE_KEY);
        if (!data) {
          result.innerHTML = '<span class="error">âœ— localStorage ä¸­æ²¡æœ‰æ•°æ®</span>';
          return;
        }
        
        const parsed = JSON.parse(data);
        result.innerHTML = `<span class="success">âœ“ æ•°æ®ç»“æ„:</span>
          <pre>${JSON.stringify(parsed, null, 2)}</pre>`;
      } catch (err) {
        result.innerHTML = `<span class="error">âœ— é”™è¯¯: ${err.message}</span>`;
      }
    }

    function testClearData() {
      const result = document.getElementById('test5-result');
      if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿ')) {
        localStorage.removeItem(STORAGE_KEY);
        result.innerHTML = '<span class="success">âœ“ æ•°æ®å·²æ¸…é™¤</span>';
      }
    }

    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æµ‹
    window.onload = function() {
      testLocalStorage();
      const data = localStorage.getItem(STORAGE_KEY);
      if (data) {
        console.log('âœ“ æ£€æµ‹åˆ°ç°æœ‰æ•°æ®');
        testLoadProfile();
      } else {
        console.log('âš  æ²¡æœ‰æ£€æµ‹åˆ°æ•°æ®');
      }
    };
  </script>
</body>
</html>
